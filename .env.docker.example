# ============================================================================
# Building Survey - Docker Deployment Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to git (it's in .gitignore)
# ============================================================================

# ----------------------------------------------------------------------------
# PostgreSQL Database (Docker Container - NOT USED FOR DATA!)
# ----------------------------------------------------------------------------
# ⚠️ NOTE: The PostgreSQL Docker container is currently NOT used for storing data!
# All data (projects, drawings, etc.) is stored in Supabase Cloud.
# This PostgreSQL is only reserved for future local storage migration.
#
# Database credentials for the PostgreSQL container
POSTGRES_DB=building_survey
POSTGRES_USER=postgres
# IMPORTANT: Change this to a strong password!
POSTGRES_PASSWORD=change_this_secure_password_now

# ----------------------------------------------------------------------------
# Supabase (Cloud - Auth + Database)
# ----------------------------------------------------------------------------
# ⚠️ IMPORTANT: Supabase is used for BOTH authentication AND data storage!
# All projects, drawings, forms, and metadata are stored in Supabase Cloud.
# Only photos/files are stored locally in Docker volumes.
#
# Get these from: https://app.supabase.com/project/_/settings/api
#
# Project URL format: https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co

# Anon Key (Public key - safe to expose)
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Service Role Key (Secret - for admin operations and setup)
# WARNING: Keep this secret! Never commit to git!
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ----------------------------------------------------------------------------
# Application Settings
# ----------------------------------------------------------------------------
# Your subdomain URL (production)
# Example: https://survey.yourdomain.com
NEXT_PUBLIC_APP_URL=https://survey.yourdomain.com

# ----------------------------------------------------------------------------
# Node Environment
# ----------------------------------------------------------------------------
NODE_ENV=production
NEXT_TELEMETRY_DISABLED=1

# ============================================================================
# SETUP INSTRUCTIONS
# ============================================================================
#
# 1. Create Supabase Project (Auth only)
#    - Go to: https://app.supabase.com
#    - Create new project
#    - Go to Settings → API
#    - Copy: Project URL, anon key, service_role key
#    - Paste them above
#
# 2. Configure Supabase Auth
#    - Go to: Authentication → URL Configuration
#    - Set Site URL: https://survey.yourdomain.com
#    - Add Redirect URLs:
#      * https://survey.yourdomain.com/auth/callback
#      * https://survey.yourdomain.com/**
#    - Go to: Authentication → Providers
#    - Enable "Email" provider
#    - Disable "Confirm email" (optional - for easier setup)
#
# 3. Copy this file
#    cp .env.docker.example .env
#
# 4. Edit .env and fill in your actual values
#    nano .env
#
# 5. Start Docker containers
#    docker-compose up -d
#
# 6. Create admin user
#    Open in browser: http://your-server-ip:8080
#    Fill in admin credentials
#
# 7. Configure reverse proxy (see INSTALL.md)
#
# 8. Access application
#    https://survey.yourdomain.com
#
# ============================================================================
